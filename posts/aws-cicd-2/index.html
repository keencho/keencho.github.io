<!DOCTYPE html><html lang="ko-KS" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="AWS를 사용해 무중단 배포 자동화 환경 구축하기 - 2. VPC와 기본 리소스" /><meta name="author" content="keencho" /><meta property="og:locale" content="ko_KS" /><meta name="description" content="AWS를 사용해 무중단 배포 자동화 환경 구축하기 시리즈 개요 VPC와 기본 리소스 VPC와 기본 리소스 생성하기 어플리케이션 구축 및 로드밸런서 적용 AWS 리소스 세팅 CodeDeploy 연동 / 마무리" /><meta property="og:description" content="AWS를 사용해 무중단 배포 자동화 환경 구축하기 시리즈 개요 VPC와 기본 리소스 VPC와 기본 리소스 생성하기 어플리케이션 구축 및 로드밸런서 적용 AWS 리소스 세팅 CodeDeploy 연동 / 마무리" /><link rel="canonical" href="https://keencho.github.io/posts/aws-cicd-2/" /><meta property="og:url" content="https://keencho.github.io/posts/aws-cicd-2/" /><meta property="og:site_name" content="keencho’s blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-06-22T20:12:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="AWS를 사용해 무중단 배포 자동화 환경 구축하기 - 2. VPC와 기본 리소스" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@keencho" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"keencho"},"dateModified":"2022-06-21T12:42:01+09:00","datePublished":"2021-06-22T20:12:00+09:00","description":"AWS를 사용해 무중단 배포 자동화 환경 구축하기 시리즈 개요 VPC와 기본 리소스 VPC와 기본 리소스 생성하기 어플리케이션 구축 및 로드밸런서 적용 AWS 리소스 세팅 CodeDeploy 연동 / 마무리","headline":"AWS를 사용해 무중단 배포 자동화 환경 구축하기 - 2. VPC와 기본 리소스","mainEntityOfPage":{"@type":"WebPage","@id":"https://keencho.github.io/posts/aws-cicd-2/"},"url":"https://keencho.github.io/posts/aws-cicd-2/"}</script><title>AWS를 사용해 무중단 배포 자동화 환경 구축하기 - 2. VPC와 기본 리소스 | keencho's blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="keencho's blog"><meta name="application-name" content="keencho's blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/custom/keencho.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">keencho's blog</a></div><div class="site-subtitle font-italic">이것저것 정리하는 블로그.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/keencho" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['seyoung050412','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>AWS를 사용해 무중단 배포 자동화 환경 구축하기 - 2. VPC와 기본 리소스</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>AWS를 사용해 무중단 배포 자동화 환경 구축하기 - 2. VPC와 기본 리소스</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1624360320" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 22, 2021 </em> </span><div class="d-flex justify-content-between"> <span> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3080 words"> <em>17 min</em> read</span></div></div></div><div class="post-content"><h1 id="aws를-사용해-무중단-배포-자동화-환경-구축하기-시리즈"><strong>AWS를 사용해 무중단 배포 자동화 환경 구축하기 시리즈</strong></h1><ol><li><a href="/posts/aws-cicd-1">개요</a><li><strong>VPC와 기본 리소스</strong><li><a href="/posts/aws-cicd-3">VPC와 기본 리소스 생성하기</a><li><a href="/posts/aws-cicd-4">어플리케이션 구축 및 로드밸런서 적용</a><li><a href="/posts/aws-cicd-5">AWS 리소스 세팅</a><li><a href="/posts/aws-cicd-6">CodeDeploy 연동 / 마무리</a></ol><h1 id="vpc와-기본-리소스"><strong>VPC와 기본 리소스</strong></h1><p>서버 구축의 첫번째 단계로 AWS의 <code class="language-plaintext highlighter-rouge">VPC (Virtual Private Cloud)</code> 와 기본 리소스들의 개념을 알아보도록 하겠습니다.</p><h2 id="리전--가용영역"><span class="mr-2"><strong>리전 &amp; 가용영역</strong></span><a href="#리전--가용영역" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">VPC</code>에 대해 알아보기 전에, 리전 &amp; 가용영역 에 대해 알아보겠습니다.</p><p>AWS에는 리전이라는 개념이 있습니다. AWS는 전 세계에 데이터 센터를 두고 있는데요, 이 데이터 센터를 클리스터링하는 물리적 위치를 리전이라고 합니다. 각 리전은 지리 영역 내에서 격리되고 물리적으로 분리된 여러 개의 가용영역(Availability Zone) 으로 구성됩니다. 사용자는 리전을 선택하여 <code class="language-plaintext highlighter-rouge">VPC</code> 를 구성할 수 있습니다.</p><p>가용영역(Availability Zone)은 AWS 리전의 중복 전력, 네트워킹 및 연결이 제공되는 하나 이상의 개별 데이터 센터로 구성됩니다. N개의 가용영을 사용하면 1개의 가용영역을 사용하는 것보다 높은 가용성, 내결함성 및 확장성을 갖춘 어플리케이션과 데이터베이스를 운영할 수 있습니다. 쉽게 말해 물리적으로 영역이 분리되어 있기 때문에 한 영역에 장애가 발생해도 다른 영역에 트래픽이 몰리게 되어 컴퓨터의 자원 사용률은 높아지겠지만 시스템이 먹통이 되는 현상은 피할 수 있게 됩니다. 물론 컴퓨터 자원에 따라 물리적인 컴퓨터 수를 조절하는 오토 스케일링 그룹을 사용하면 자원 사용률은 상관 없는 이야기이긴 합니다.</p><h2 id="vpc"><span class="mr-2"><strong>VPC</strong></span><a href="#vpc" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">VPC</code> 는 <code class="language-plaintext highlighter-rouge">Virtual Private Cloud</code>의 약자로, 아마존은 공식적으로 다음과 같이 설명하고 있습니다.</p><blockquote><p>Amazon Virtual Private Cloud(VPC)를 사용하면 AWS 클라우드에서 논리적으로 격리된 공간을 프로비저닝하여 고객이 정의하는 가상 네트워크에서 AWS 리소스를 시작할 수 있습니다. IP 주소 범위 선택, 서브넷 생성, 라우팅 테이블 및 네트워크 게이트웨이 구성 등 가상 네트워킹 환경을 완벽하게 제어할 수 있습니다. VPC에서 IPv4와 IPv6를 모두 사용하여 리소스와 애플리케이션에 안전하고 쉽게 액세스할 수 있습니다.</p></blockquote><p>즉, <strong><em>“AWS는 논리적으로 격리된 공간을 프로비저닝 하여 독립된 하나의 가상 블록을 제공하며, VPC는 AWS가 제공한 가상 블록을 기반으로 한 사용자의 계정 전용 가상 네트워크”</em></strong> 라고 생각하면 쉬울것 같습니다.</p><p>이 가상 블록은 내부 리소스들을 모두 public 으로 공개할 수 있지만, 대부분의 사용자들이 내부 리소스들을 모두 private 으로 두고 그 private 리소스들에 접근할 수 있는 하나의 <code class="language-plaintext highlighter-rouge">Public EC2 인스턴스(Bastion Host)</code> 를 두고 사용하는 편입니다. (<code class="language-plaintext highlighter-rouge">Bastion Host</code> 에 대해서 는 추후에 다시 다루도록 하겠습니다.)</p><p><code class="language-plaintext highlighter-rouge">VPC</code> 는 2019년부터 강제되었기 때문에 AWS에서 제공하는 대부분의 서비스는 <code class="language-plaintext highlighter-rouge">VPC</code> 없이는 사용할수가 없게 되었습니다.</p><p>하나의 <code class="language-plaintext highlighter-rouge">VPC</code>를 만들면 기본적으로 생성되는 리소스들이 있습니다. 개인적으로 AWS를 이용해 서버 구축을 하려면 필수로 알아야 한다고 생각되는 개념들인데요. 하나하나 짚어보도록 하겠습니다.</p><h2 id="cidr"><span class="mr-2"><strong>CIDR</strong></span><a href="#cidr" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>AWS 콘솔을 이용해 <code class="language-plaintext highlighter-rouge">VPC</code>를 생성하려고 하면 CIDR 블록 을 지정해야 한다는 문구를 만날 수 있습니다. 결론부터 말하자면 <code class="language-plaintext highlighter-rouge">CIDR</code>은 <strong><em>“IP주소 할당 기법”</em></strong> 입니다.</p><p>CIDR 블록은 IP 주소와 슬래쉬가 뒤에 따라오는 넷마스크 형태의 숫자로 구성되어 있습니다. 슬래쉬 뒤에 오는 숫자는 IP의 범위를 나타냅니다.</p><p>예를 들어 IP <strong>172.31.0.0/32</strong> 는 정확히 <strong>172.31.0.0</strong> 를 가리킵니다. IP의 범위는 지정된 IP부터 2^(32-n)개 입니다. 만약 숫자가 16이면 2^(32-16) = 65,536 개의 IP 주소를 의미합니다.</p><p><code class="language-plaintext highlighter-rouge">VPC</code> 내부의 자원들은 각각의 프라이빗 ip를 가지는데요, 이때 CIDR 블록의 범위 안에서 IP를 할당받게 됩니다. <code class="language-plaintext highlighter-rouge">VPC</code> 범위 내에서 할당 가능한 IP가 모두 할당되면 더이상 리소스를 만들수 없습니다. 한 <code class="language-plaintext highlighter-rouge">VPC</code> 의 최대 크기는 16입니다. 즉, 65,356개의 IP를 사용할 수 있으며, 이보다 큰 <code class="language-plaintext highlighter-rouge">VPC</code>는 생성할 수 없습니다. <del>(물론 그럴일은 잘 없겠지요.)</del></p><p>CIDR 블록을 만들때 주의해야할 사항이 있습니다. 만약 사설망 대역이 아닌 인터넷과 연결되어 있는 경우 문제가 될 수 있습니다. 예를 들어 <strong>3.51.0.0/16</strong>를 블록으로 지정한 경우 이 VPC 에서 <strong>3.51.0.0/16</strong>로 접속하는 트래픽은 VPC 내부로 라우팅됩니다. 그런데 <strong>3.51.0.0/16</strong> 범위는 외부 인터넷에서 사용할 수 있는 범위의 IP 입니다. 따라서 이 VPC 내부에서는 <strong>3.51.0.0/16</strong> 에 속한 인터넷 IP에 접근하는 것이 불가능 합니다. 외부로의 연결이 필요한 경우라면 무조건 사설망 대역을 사용해야 하며, 그렇지 않더라도 사설망 대역을 사용하는 것이 권장되는 편입니다. 사설 IP 대역에는 아래 3가지 대역이 있습니다.</p><ul><li>Class A : 10.0.0.0 ~ 10.255.255.255<li>Class B : 172.16.0.0 ~ 172.31.255.255<li>Class C : 192.168.0.0 ~ 192.168.255.255</ul><h2 id="서브넷"><span class="mr-2"><strong>서브넷</strong></span><a href="#서브넷" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">VPC</code>를 리전에 생성한것 만으로는 아무것도 할 수 없습니다. <code class="language-plaintext highlighter-rouge">VPC</code>는 내부적으로 다시 CIDR 블록으로 나뉘어지고, 서브넷은 실제 <code class="language-plaintext highlighter-rouge">VPC</code> 내부에서 리소스가 생성되는 물리적 공간인 가용영역(Availability Zone) 과 연결됩니다.</p><p><code class="language-plaintext highlighter-rouge">VPC</code>가 논리적인 범위라면, 서브넷은 <code class="language-plaintext highlighter-rouge">VPC</code> 내부에서 실제로 리소스가 생성될 수 있는 가상 네트워크라고 생각하면 될 것 같습니다. AWS 콘솔에서 어떤 리소스(ex. EC2, RDS)를 생성할 때, <code class="language-plaintext highlighter-rouge">VPC</code>만 지정하는 경우는 없습니다. 서브넷도 함께 지정하는데요, 보통 서브넷을 지정하면 <code class="language-plaintext highlighter-rouge">VPC</code>는 자동으로 지정되는 형태를 띕니다.</p><p>하나의 <code class="language-plaintext highlighter-rouge">VPC</code>는 N개의 서브넷을 가질 수 있습니다. 서브넷의 최대 크기는 <code class="language-plaintext highlighter-rouge">VPC</code>의 크기와 같습니다. (넷마스크 16 ~ 28의 범위) 보통 한 리전 내의 사용 가능한 가용영역을 고려하여 적절한 갯수의 서브넷을 가용영역 내부에 생성합니다. 이렇게 각각 가용영역 내부에 동일한 형태의 별도의 서브넷을 가지면 한개의 가용영역에 장애가 생겨도 트래픽 분산 측면에서 쉽게 장애에 대응할 수 있겠지요.</p><p>장애 대응 측면에서 서브넷을 가용영역만큼 나누는 경우 사용할 리전에서 사용가능한 가용영역의 갯수를 미리 파악 할 필요가 있습니다. (서울 리전의 경우 4개) 모든 가용영역 사용할 필요는 없지만 보통 2개 이상의 가용영역을 구성하는게 일반적입니다.</p><h3 id="퍼블릭-서브넷--프라이빗-서브넷"><span class="mr-2"><strong>퍼블릭 서브넷 &amp; 프라이빗 서브넷</strong></span><a href="#퍼블릭-서브넷--프라이빗-서브넷" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>서브넷도 어떻게 설정하느냐에 따라 두가지로 나뉠 수 있습니다. 먼저 퍼블릭 서브넷은 <code class="language-plaintext highlighter-rouge">VPC</code> 내부에 있더라도 외부에서 퍼블릭 IP (탄력적 IP) 를 통해 들어올 수 있는 서브넷을 의미합니다.</p><p>보통 퍼블릿 서브넷에 <code class="language-plaintext highlighter-rouge">Bastion Host</code>를 두어 같은 <code class="language-plaintext highlighter-rouge">VPC</code> 내부에 있는 프라이빗 서브넷, RDS 등에 접근 하곤 합니다. <code class="language-plaintext highlighter-rouge">Bastion Host</code>에 대해선 추후 서버 구축시 자세히 다루도록 하겠습니다.</p><p>프라이빗 서브넷은 외부에서 직접 들어올수도, 나갈 수도 없는 <code class="language-plaintext highlighter-rouge">VPC</code> 내부에 단절된 네트워크를 사용하는 서브넷입니다. 프라이빗 서브넷에 들어오려면 퍼블릭 자원(Load Balancer 등) 을 통해 들어와야 하며 프라이빗 서브넷에서 외부 인터넷에 연결하려면 <strong><em>“퍼블릭 서브넷에 있으며 탄력적 IP에 연결된 NAT Gateway”</em></strong>를 통해 나가야 합니다.</p><h2 id="nat-gateway"><span class="mr-2"><strong>NAT Gateway</strong></span><a href="#nat-gateway" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>NAT Gateway는 프라이빗 서브넷이 인터넷과 통신할때 필요로 하는 아웃바운드 리소스 입니다. 프라이빗 서브넷에 아웃바운드 트래픽이 필요한 경우가 있습니다. (ex. 외부 연동 API 서버 호출, OS 패키지 업데이트 등) 이때, 퍼블릭 서브넷에 존재하는 NAT Gateway는 프라이빗 서브넷의 아웃바운드 요청을 받아 인터넷 게이트웨이로 연결하는 역할을 합니다.</p><h2 id="인터넷-게이트웨이"><span class="mr-2"><strong>인터넷 게이트웨이</strong></span><a href="#인터넷-게이트웨이" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">VPC</code>는 독립된 네트워크 환경입니다. 따라서 아무 설정을 하지 않는다면 내부 서브넷 설정이 어떻든 간에 인터넷을 사용할 수 없습니다. 이때 인터넷에 연결하기 위해 필요한 것이 인터넷 게이트웨이 입니다. 외부 인터넷과 <code class="language-plaintext highlighter-rouge">VPC</code>를 연결해 주는 관문이 되는 것이지요.</p><h2 id="라우터--라우팅-테이블"><span class="mr-2"><strong>라우터 &amp; 라우팅 테이블</strong></span><a href="#라우터--라우팅-테이블" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>한 서브넷 안에서 네트워크 요청이 발생하면 미리 정의된 라우팅 테이블에 따라 라우터로 향하게 됩니다.</p><blockquote><p>라우터는 최종 목적지이고, 라우팅 테이블은 목적지(라우터)에 도달하기 위한 네트워크 노선 이라고 이해하면 쉽습니다.</p></blockquote><p>위에서 장황하게 설명하긴 했지만 A서브넷에 연결된 라우팅 테이블의 0.0.0.0/0 즉, 기본 경로가 인터넷 게이트웨이와 직접 연결되어 있으면 퍼블릭 서브넷이고 인터넷 게이트웨이와 직접 연결되어 있지 않거나 NAT Gateway와 연결되어 있으면 프라이빗 서브넷이 되는 것입니다.</p><h2 id="보안그룹-security-group"><span class="mr-2"><strong>보안그룹 (Security Group)</strong></span><a href="#보안그룹-security-group" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>위의 인터넷 게이트웨이 &amp; 라우터 &amp; 라우팅 테이블이 <code class="language-plaintext highlighter-rouge">VPC</code> 와 서브넷간의 트래픽을 제어한다면, 보안그룹은 EC2 인스턴스의 인바운드, 아웃바운드를 포트 번호별로 제어하기 위한 설정입니다.</p><p>퍼블릭 서브넷에 존재하더라도 관련된 보안그룹의 포트가 오픈되어 있지 않다면 직접 인스턴스로 접근할 수 없습니다. 개인적으로 최종 방화벽(?) 같은 느낌이라고 생각합니다.</p><h2 id="마치며"><span class="mr-2"><strong>마치며…</strong></span><a href="#마치며" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">VPC</code>와 그를 사용하고자 할 때 필요한 여러 리소스들에 대해 알아보았습니다. 사실 저도 글로만 쓰면서 헷갈리는 것들이 있었는데요, 다음 포스팅에는 하나하나 직접 만들면서 자세히 알아보도록 하겠습니다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/aws/'>AWS</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/aws/" class="post-tag no-text-decoration" >AWS</a> <a href="/tags/devops/" class="post-tag no-text-decoration" >DevOps</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=AWS%EB%A5%BC+%EC%82%AC%EC%9A%A9%ED%95%B4+%EB%AC%B4%EC%A4%91%EB%8B%A8+%EB%B0%B0%ED%8F%AC+%EC%9E%90%EB%8F%99%ED%99%94+%ED%99%98%EA%B2%BD+%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0+-+2.+VPC%EC%99%80+%EA%B8%B0%EB%B3%B8+%EB%A6%AC%EC%86%8C%EC%8A%A4+-+keencho%27s+blog&url=https%3A%2F%2Fkeencho.github.io%2Fposts%2Faws-cicd-2%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=AWS%EB%A5%BC+%EC%82%AC%EC%9A%A9%ED%95%B4+%EB%AC%B4%EC%A4%91%EB%8B%A8+%EB%B0%B0%ED%8F%AC+%EC%9E%90%EB%8F%99%ED%99%94+%ED%99%98%EA%B2%BD+%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0+-+2.+VPC%EC%99%80+%EA%B8%B0%EB%B3%B8+%EB%A6%AC%EC%86%8C%EC%8A%A4+-+keencho%27s+blog&u=https%3A%2F%2Fkeencho.github.io%2Fposts%2Faws-cicd-2%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fkeencho.github.io%2Fposts%2Faws-cicd-2%2F&text=AWS%EB%A5%BC+%EC%82%AC%EC%9A%A9%ED%95%B4+%EB%AC%B4%EC%A4%91%EB%8B%A8+%EB%B0%B0%ED%8F%AC+%EC%9E%90%EB%8F%99%ED%99%94+%ED%99%98%EA%B2%BD+%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0+-+2.+VPC%EC%99%80+%EA%B8%B0%EB%B3%B8+%EB%A6%AC%EC%86%8C%EC%8A%A4+-+keencho%27s+blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/jpa-flush/">JPA & Hibernate Flush Mode</a><li><a href="/posts/aws-cicd-1/">AWS를 사용해 무중단 배포 자동화 환경 구축하기 - 1. 개요</a><li><a href="/posts/terraform-aws-infra-6/">Terraform으로 AWS 무중단 배포 인프라 구성하기 - 6. 운영환경 (백엔드)</a><li><a href="/posts/aapt2-arm/">Arm 아키텍처에서 AAPT2 빌드 도구 사용하기</a><li><a href="/posts/terraform-aws-infra-1/">Terraform으로 AWS 무중단 배포 인프라 구성하기 - 1. 개요</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/jpa/">JPA</a> <a class="post-tag" href="/tags/design-pattern/">Design Pattern</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/hibernate/">Hibernate</a> <a class="post-tag" href="/tags/ecs/">ECS</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/querydsl/">QueryDSL</a> <a class="post-tag" href="/tags/react/">React</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/aws-cicd-1/"><div class="card-body"> <em class="small" data-ts="1624271520" data-df="ll" > Jun 21, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS를 사용해 무중단 배포 자동화 환경 구축하기 - 1. 개요</h3><div class="text-muted small"><p> AWS를 사용해 무중단 배포 자동화 환경 구축하기 시리즈 개요 VPC와 기본 리소스 VPC와 기본 리소스 생성하기 어플리케이션 구축 및 로드밸런서 적용 AWS 리소스 세팅 CodeDeploy 연동 / 마무리 개요 AWS를 이용하여 가장 기본적인 형태의 인프라를 구축하고 GithubAction - CodeDeploy 를 이용하...</p></div></div></a></div><div class="card"> <a href="/posts/aws-cicd-3/"><div class="card-body"> <em class="small" data-ts="1624670880" data-df="ll" > Jun 26, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS를 사용해 무중단 배포 자동화 환경 구축하기 - 3. VPC와 기본 리소스 생성하기</h3><div class="text-muted small"><p> AWS를 사용해 무중단 배포 자동화 환경 구축하기 시리즈 개요 VPC와 기본 리소스 VPC와 기본 리소스 생성하기 어플리케이션 구축 및 로드밸런서 적용 AWS 리소스 세팅 CodeDeploy 연동 / 마무리 VPC와 기본 리소스 생성하기 AWS 콘솔을 사용해 직접 VPC와 필요한 리소스들을 생성해 보겠습니다. VPC 생성하...</p></div></div></a></div><div class="card"> <a href="/posts/aws-cicd-4/"><div class="card-body"> <em class="small" data-ts="1624792320" data-df="ll" > Jun 27, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS를 사용해 무중단 배포 자동화 환경 구축하기 - 4. 어플리케이션 구축 및 로드밸런서 적용</h3><div class="text-muted small"><p> AWS를 사용해 무중단 배포 자동화 환경 구축하기 시리즈 개요 VPC와 기본 리소스 VPC와 기본 리소스 생성하기 어플리케이션 구축 및 로드밸런서 적용 AWS 리소스 세팅 CodeDeploy 연동 / 마무리 어플리케이션 구축 및 로드밸런서 적용 이번 포스팅에서는 간단한 Spring Boot 어플리케이션을 만들어 ec2 인스턴...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/aws-cicd-1/" class="btn btn-outline-primary" prompt="Older"><p>AWS를 사용해 무중단 배포 자동화 환경 구축하기 - 1. 개요</p></a> <a href="/posts/aws-cicd-3/" class="btn btn-outline-primary" prompt="Newer"><p>AWS를 사용해 무중단 배포 자동화 환경 구축하기 - 3. VPC와 기본 리소스 생성하기</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/keencho">keencho</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/jpa/">JPA</a> <a class="post-tag" href="/tags/design-pattern/">Design Pattern</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/hibernate/">Hibernate</a> <a class="post-tag" href="/tags/ecs/">ECS</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/querydsl/">QueryDSL</a> <a class="post-tag" href="/tags/react/">React</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
